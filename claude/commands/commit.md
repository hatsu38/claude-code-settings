---
allowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*), Bash(git diff:*), Bash(git log:*)
description: 日本語で詳細なコミットメッセージを生成してコミットする
---

変更内容を分析し、日本語で詳細なコミットメッセージを生成してコミットする。

**すべての出力は日本語で記述すること。**

## コンテキスト収集

以下のコマンドを実行して現在の状態を把握する：

- `git status` で変更状態を確認
- `git diff HEAD` でステージング済み・未ステージングの差分を取得
- `git branch --show-current` で現在のブランチを確認
- `git log --oneline -10` で直近のコミット履歴を確認

## 手順

1. 差分を分析し、変更の性質と目的を理解する

2. コミットメッセージの候補を3つ生成する
   - Conventional Commits形式を使用（feat:, fix:, docs:, refactor:, test:, chore:, perf:, ci:）
   - 1行目: タイプとタイトル（日本語、簡潔に）
   - 2行目: 空行
   - 3行目以降: 変更内容の詳細（日本語、箇条書き）

   例：
   ```
   feat: ユーザープロフィール編集機能を追加

   - プロフィール編集フォームコンポーネントを実装
   - バリデーション（メール形式、名前の文字数制限）を追加
   - 編集成功時のトースト通知を実装
   ```

3. 3つの候補を提示し、最適なものを選定する
   - 各候補の概要を表示
   - 選定理由を説明する

4. ユーザーに選定したメッセージを提示し、確認を求める
   - 修正の希望があれば対応する

5. 必要に応じて `git add` でファイルをステージングする
   - `.env`、認証情報、シークレットを含むファイルはステージングしない
   - 変更に関連するファイルのみをステージングする

6. 選定されたメッセージで `git commit` を実行する

## 制約事項

- Co-Authored-By フッターを追加しない
- コミットメッセージは日本語で記述する（タイプ接頭辞は英語）
- `--no-verify` フラグを使用しない
- pre-commit hookが失敗した場合は、問題を修正してから新しいコミットを作成する
