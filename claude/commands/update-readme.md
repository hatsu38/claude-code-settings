---
description: README.md をリポジトリの実態と同期する
---

README.md の内容をリポジトリの実態（コマンド、スキル、ルール、MCPサーバー）と比較し、差分があれば更新する。

**すべての出力は日本語で記述すること。**

## ステップ1: 情報収集（並列）

以下を並列で実行し、リポジトリの現状を把握する：

### 1-1. コマンド一覧の収集

`claude/commands/*.md` の各ファイルを読み込み、以下を抽出する：

- ファイル名（拡張子なし）→ コマンド名（`/` を付与）
- frontmatter の `description`（なければ本文1行目）

### 1-2. スキル一覧の収集

`claude/skills/*/SKILL.md` の各ファイルを読み込み、以下を抽出する：

- frontmatter の `name`
- frontmatter の `description`

### 1-3. ルール一覧の収集

`.claude/rules/*.md` の各ファイルを読み込み、以下を抽出する：

- ファイル名
- 見出し（`#` 行）と最初の箇条書きから概要を把握

### 1-4. MCP サーバー一覧の収集

`.claude.json` を読み込み、`mcpServers` のキー一覧と各サーバーの種類を取得する。

### 1-5. 現在の README.md の読み込み

`README.md` を読み込む。

## ステップ2: 差分検出

収集した情報と README.md の記載内容を比較し、以下の不一致を検出する：

### コマンド一覧テーブル
- README.md に記載されていないコマンド（追加漏れ）
- README.md に記載されているが実ファイルが存在しないコマンド（削除漏れ）
- description の不一致

### スキル一覧テーブル
- 同上

### ルール一覧テーブル
- 同上

### MCP サーバー設定テーブル
- `.claude.json` に存在するが README.md にないサーバー
- README.md に記載されているが `.claude.json` にないサーバー

### ディレクトリ構成
- コマンド/スキルの追加・削除に伴うツリー表示の不一致

## ステップ3: 結果の提示

差分がない場合：
「README.md はリポジトリの実態と同期されています。更新は不要です。」と出力して終了する。

差分がある場合、以下の形式でレポートを出力する：

```
## README.md 同期チェック結果

### 差分サマリー
- コマンド: +N 追加 / -N 削除 / ~N 変更
- スキル: +N 追加 / -N 削除 / ~N 変更
- ルール: +N 追加 / -N 削除 / ~N 変更
- MCP サーバー: +N 追加 / -N 削除

### 詳細
#### コマンド
- [追加] `/new-command` - 説明文
- [削除] `/old-command`

#### スキル
- ...

#### ルール
- ...

#### MCP サーバー
- ...

#### ディレクトリ構成
- ツリー表示の更新が必要
```

ユーザーに「これらの変更を README.md に反映しますか？」と確認する。

## ステップ4: README.md の更新

確認後、以下のセクションのみを更新する：

1. **ディレクトリ構成** - ツリー表示を実態に合わせる
2. **コマンド一覧** - テーブルの行を追加・削除・更新
3. **スキル一覧** - テーブルの行を追加・削除・更新
4. **ルール一覧** - テーブルの行を追加・削除・更新
5. **MCP サーバー設定** - テーブルの行を追加・削除・更新

## 制約事項

- README.md の全体構成（セクション順、ヘッダー、概要、セットアップ手順、カスタマイズ、ライセンス）は変更しない
- テーブル内の既存の説明文は、ファイルの description と一致しない場合のみ更新する
- 手動で追記されたカスタム内容は保持する
- MCP サーバーの「用途」列は `.claude.json` から自動判定できないため、新規サーバーは用途を空欄にしてユーザーに記入を促す
